# LangChain 学习日志与项目实践

## 📖 项目简介

本项目是一个完整的RAG（检索增强生成）系统学习实践记录，从零开始构建一个功能完整的AI问答应用。整个学习过程分为4个阶段，每个阶段都有具体的任务和学习要点，最终实现从基础工具使用到复杂Agent应用的完整技术栈。

**🎯 核心目标：** 掌握RAG系统的完整开发流程，包括文档处理、向量检索、大模型调用、Web应用开发等关键技术。

**📁 work文件夹** 存储了我从最开始慢慢学习LangChain的过程，从0开始做一个小的个人项目。

## 🛣️ 学习路径概览

```
W1: 基础工具与环境搭建 → W2: RAG核心系统实现 → W3: Web产品化 → W4: Agent智能化
```

---

## W1：基础工具与环境搭建 🔧

**阶段目标：** 掌握HTTP请求、数据处理、大模型调用等基础技能，为RAG系统开发打下坚实基础。

### T1：基础的爬虫脚本，使用 requests 库请求一个公开API，并打印返回的状态码和原始文本内容
  - `HTTP请求`的基本原理  
  - `GET请求`是如何工作的
  - `request`都有什么方法
  - 状态码都有哪些

### T2：对爬取到的内容的分析
- 爬取到的内容是什么格式
- 要转换为什么格式常用，如何转换

### T4：不使用库 手动调用大模型  构建HTTP请求
- 构建请求需要的东西都有什么
- 如何构建请求头，请求体

### T5：使用LangChain进行调用大模型
- 需要调用的库是什么
- 如何配置大模型接口
- 两种输出的方式都是什么，什么方法实现的
- `.join()`是干什么的，什么效果

### T6：一个完整的爬虫项目  
- 发送请求必须有的是什么，如何模仿浏览器
- `get方法`如何设置超时
- 使用什么解析HTML，解析的效果是什么
- 如何查找标签，获取标签的内容
- 如何去除重复的内容
- 循环中枚举函数的使用用法
---

## W2：RAG核心系统实现 🤖

**阶段目标：** 从零开始构建完整的RAG（检索增强生成）系统，掌握文档处理、向量化、相似性检索等核心技术。

**🔄 RAG系统核心流程：**
```
PDF文档 → 文本分割 → 向量化存储 → 相似性检索 → 上下文增强 → LLM生成答案
```

**📋 本阶段将逐步实现RAG的每个关键组件：**

### T1：加载PDF输出内容
- 通过什么对象，什么方法，加载PDF
- 如何获取当前的文件路径，如何智能拼接路径
- 加载后是什么数据类型，里面是什么内容
- 如何查看PDF的文本内容
- 切片是什么

### T2：把加载的PDF文件分割成小的文本块
- 用什么对象，什么方法，进行分割
- 分割器实例的参数都有什么
- 分割完是什么数据类型，里面是什么内容
- 如何查看分割后的文本内容
- 如何查看分割后的文本块的数量

### T3：把分割后的内容转换为向量并存储在向量数据库  并根据内容进行检索
- 遥控器是什么，翻译官是什么
- 遥控器 翻译官的参数有什么
- 什么方法把文档添加到数据库，自动向量化
- 如何查询数据库中当前存储的条目总数
- 怎么相似搜索查找

### T4：创建一个完整的RAG链  输入问题->检索->将问题和上下文组合成Prompt->发送给LLM->获得答案
- qa链的参数
- qa链的类型都有什么
- 如何将向量数据库转换为一个“检索器”组件
- qa链如何调用
- 调用qa链的结果是什么数据类型  

### T5： 封装RAG链

---

## W3：Web产品化开发 🌐

**阶段目标：** 将RAG系统转化为可部署的Web应用，实现API接口、流式输出、前端界面等功能。

**🏗️ 产品化关键要素：**
- **后端API：** FastAPI构建RESTful接口
- **流式输出：** 实时流式返回生成结果  
- **前端界面：** Streamlit构建用户交互界面
- **系统集成：** 前后端完整对接

### T1：创建一个简单的Web服务器
- 使用什么实例化
- 装饰器是什么
- 实例化的函数可以类比为什么
- 如何访问根目录，如何接受路径参数并返回
- 如何运行，运行的代码是什么
- 什么是类型提示

### T2：创建一个简单的Web服务器
#### 过程
- 创建Web服务器
- 创建RAG链
  - 加载PDF
  - 分割PDF
  - 创建向量数据库
  - 创建检索器
  - 创建RAG链
- 创建接口
- 创建数据模型
- 对数据进行处理

#### 问题
- 通过什么库定义数据类型
- 定义哪些数据类型，什么作用
- 怎么在API文档中编写信息，API文档如何查看

### T3：改造T2的接口，使其流式输出
#### 思路
- FastAPI的“流媒体播放器”: FastAPI提供StreamingResponse。它就像一个流媒体播放器
- LangChain的“数据流”: RAG 链的 .astream() 方法，会返回一个数据“流”，可以从中不断地取出AI生成的文本片段
- 异步生成器 (Async Generator)：这是连接播放器和数据流的管道。它是一个特殊的 async def 函数，使用 yield 关键字来一块一块地把从数据流中取出的内容，传送给播放器。
#### 问题
- 异步关键字，发送到客户端的关键字，微小暂停的关键字
- 什么是异步函数生成器
- 流式输出和普通输出的区别，在数据模型上

### T4：使用Streamlit创建一个简单的Web界面。包含一个标题、一个文本输入框和一个按钮。
#### 过程
#### 问题
- 使用什么库
- 如何设置标题，设置单行输入框，设置按钮，输出内容
- 设置加载动画，成功框，警告框
- with关键字干嘛的

### T5：将T4的Streamlit界面与T3的FastAPI流式接口连接起来。当在界面输入问题并点击按钮时，它会调用后端的API，并将流式返回的答案实时显示在界面上。

---

## W4：AI Agent智能化升级 🚀

**阶段目标：** 掌握Agent技术，让RAG系统具备主动思考、工具调用、任务规划等高级能力。

**🧠 Agent核心能力：**
- **工具使用：** 封装和调用外部工具（如搜索、计算等）
- **推理决策：** ReAct框架实现思考→行动→观察循环
- **任务执行：** 自主完成复杂的多步骤任务
### T1：工具封装与集成
**任务：** 学习LangChain的Tool。将一个简单的功能（如Python的math.sqrt）或一个API（如Tavily搜索）包装成一个LangChain工具。

### T2：基础Agent构建
**任务：** 学习ReAct框架思想。使用LangChain创建一个最简单的Agent，为其配备T1中创建的工具。给它一个需要使用工具才能回答的问题（如"9的平方根是多少？"）

### T3：复杂Agent应用
**任务：** 基于T2，创建一个更复杂的Agent。任务是"根据一个公司名称（如'特斯拉'），自动上网搜索其近期新闻，并生成一段50字的摘要"。


**💡 项目亮点：** 从零开始，逐步构建一个功能完整、可扩展的智能问答系统，具备实际部署价值。


